<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’ª STRICT PROTOCOL: LIFE 2.0 â€” Enhanced</title>
  <meta name="description" content="A focused, elegant operating system for discipline, routines, hydration, and daily mastery." />
  <meta name="theme-color" content="#64ffda" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Base palette */
      --bg:#06080f;
      --bg-2:#0b0f1a;
      --txt:#e5f2ff;
      --muted:#9fb2c7;
      --neon:#64ffda;
      --neon-2:#7c5cff;
      --danger:#ff6b6b;
      --ok:#19db8a;
      --warning:#f6c744;

      --card:rgba(16,18,28,.58);
      --glass:rgba(255,255,255,.05);
      --stroke:rgba(127,149,255,.28);
      --shadow:0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px var(--stroke);
      --radius:18px;

      /* Typography */
      --font: 'Plus Jakarta Sans', Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      --display: "Space Grotesk", var(--font);
    }
    /* ===== Light mode (auto via toggle) ===== */
    .light{
      --bg:#f7fbff;
      --bg-2:#ffffff;
      --txt:#0f1a2b;
      --muted:#51627a;
      --card:rgba(255,255,255,.85);
      --glass:rgba(10,14,22,.05);
      --stroke:rgba(20,30,60,.15);
      --shadow:0 10px 30px rgba(15,26,43,.08), inset 0 0 0 1px var(--stroke);
    }

    /* ===== Global ===== */
    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0; background:
        radial-gradient(1200px 600px at 10% 0%, color-mix(in oklab, var(--neon) 18%, transparent) 0%, transparent 60%),
        radial-gradient(900px 500px at 92% 10%, color-mix(in oklab, var(--neon-2) 18%, transparent) 0%, transparent 58%),
        radial-gradient(700px 500px at 50% 110%, color-mix(in oklab, var(--neon-2) 10%, transparent) 0%, transparent 52%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);
      color:var(--txt); font:400 16px/1.6 var(--font);
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    @media (prefers-reduced-motion: reduce){ *{animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important; scroll-behavior:auto !important} }

    a{color:var(--neon); text-decoration:none}
    a:hover{text-decoration:underline}
    h1,h2,h3{line-height:1.12; margin:0 0 .6rem}
    h1{font-family:var(--display); font-weight:800; font-size:clamp(30px, 5.4vw, 52px); letter-spacing:.2px}
    h2{font-weight:800; font-size:clamp(20px, 3vw, 28px)}
    h3{font-weight:700; font-size:clamp(18px, 2.2vw, 22px)}
    p{margin:.5rem 0 1rem}
    small{color:var(--muted)}

    /* Floating stars / orbs */
    .stars{position:fixed; inset:0; pointer-events:none; z-index:0}
    .stars span{position:absolute; width:2px; height:2px; background:rgba(255,255,255,.55); border-radius:50%; filter:drop-shadow(0 0 6px var(--neon-2)); animation:twinkle var(--d) linear infinite; opacity:.85}
    @keyframes twinkle{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-8px) scale(1.5); opacity:.6}}

    /* Header */
    header{ position:relative; z-index:1; padding:28px 18px 10px; backdrop-filter:saturate(140%) blur(6px) }
    .mast{ max-width:1200px; margin:0 auto; padding:22px; border-radius:var(--radius);
      background:linear-gradient(120deg, color-mix(in oklab, var(--neon-2) 16%, transparent), color-mix(in oklab, var(--neon) 8%, transparent)); box-shadow:var(--shadow) }
    .subtitle{color:var(--muted); font-size:clamp(14px,2.2vw,18px)}
    .motto{display:inline-flex; gap:8px; align-items:center; margin-top:10px; padding:8px 12px; border-radius:999px; background:linear-gradient(90deg, color-mix(in oklab, var(--neon) 14%, transparent), color-mix(in oklab, var(--neon-2) 14%, transparent)); border:1px solid var(--stroke); color:color-mix(in oklab, var(--txt) 90%, white 10%); font-weight:700; text-transform:uppercase; letter-spacing:.6px}

    /* Nav */
    .nav{ position:sticky; top:0; z-index:10; padding:10px 16px; background:color-mix(in oklab, var(--bg-2) 84%, transparent); backdrop-filter:blur(8px) saturate(140%);
      border-bottom:1px solid var(--stroke) }
    .nav .wrap{max-width:1200px; margin:0 auto; display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .nav a{display:inline-flex; gap:8px; align-items:center; padding:10px 14px; border-radius:12px; text-decoration:none; color:var(--txt); border:1px solid transparent}
    .nav a:hover{border-color:var(--stroke); background:var(--glass)}
    .nav .right{margin-left:auto; display:flex; gap:8px; align-items:center}

    .btn{cursor:pointer; border:1px solid var(--stroke); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border-radius:12px; padding:10px 14px; color:var(--txt)}
    .btn[aria-pressed="true"]{outline:2px solid var(--neon)}

    /* Layout */
    .container{max-width:1200px; margin:18px auto 120px; padding:0 18px; position:relative; z-index:1}
    .grid{display:grid; gap:18px}
    @media (min-width: 900px){ .grid-2{grid-template-columns:1.2fr .8fr} }

    /* Cards */
    .card{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01)); border:1px solid var(--stroke); box-shadow:var(--shadow); border-radius:var(--radius); padding:18px; position:relative; overflow:hidden}
    .card h2 .ping{display:inline-block; width:8px; height:8px; background:var(--neon); border-radius:50%; box-shadow:0 0 18px var(--neon); margin-left:8px}

    /* ===== Table (desktop default) ===== */
    .table-wrap{width:100%; overflow:auto; -webkit-overflow-scrolling:touch; scrollbar-gutter: stable both-edges}
    .table{width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:12px; border:1px solid var(--stroke); min-width:520px}
    .table th, .table td{padding:12px 14px; text-align:left}
    .table thead th{font-size:.9rem; color:color-mix(in oklab, var(--txt) 92%, white 8%); background:color-mix(in oklab, var(--neon-2) 14%, transparent); position:sticky; top:0; z-index:1}
    .table tbody tr{background:rgba(255,255,255,.02); position:relative; transition:transform .25s ease, box-shadow .25s ease, background .25s ease}
    .table tbody tr:nth-child(odd){background:rgba(255,255,255,.04)}
    .table td:first-child, .table th:first-child{position:sticky; left:0; background:inherit; backdrop-filter:blur(2px)}

    /* ===== Stack mode (mobile) ===== */
    @media (max-width: 720px){
      /* turn table into card-list */
      .table{border:none; min-width:0}
      .table thead{display:none}
      .table tbody{display:grid; gap:12px}
      .table tr{display:grid; grid-template-columns:1fr; border:1px solid var(--stroke); border-radius:12px; overflow:hidden}
      .table td{display:grid; grid-template-columns:120px 1fr; gap:10px; align-items:center; padding:10px 12px; border-bottom:1px dashed color-mix(in oklab, var(--stroke) 60%, transparent)}
      .table td:last-child{border-bottom:none}
      .table td::before{content:attr(data-th); font-weight:700; color:var(--muted)}
      /* specific widths for time/status labels */
      #routineTable td:nth-child(1)::before{content:'Time'}
      #routineTable td:nth-child(2)::before{content:'Routine'}
      #routineTable td:nth-child(3)::before{content:'Status'}
    }

    /* Multi-highlight styles */
    .now{--glow:0 0 0 0 rgba(0,0,0,0)}
    .now::before{
      content:""; position:absolute; left:0; top:0; bottom:0; width:6px; border-radius:0 8px 8px 0;
      background:linear-gradient(180deg, var(--neon), var(--neon-2)); filter:drop-shadow(0 0 10px color-mix(in oklab, var(--neon) 60%, transparent));
      opacity:.95
    }
    .now .badge{position:relative; z-index:1}
    .now--primary{
      background:linear-gradient(180deg, color-mix(in oklab, var(--neon) 10%, transparent), color-mix(in oklab, var(--neon-2) 12%, transparent));
      box-shadow:0 10px 30px color-mix(in oklab, var(--neon) 18%, transparent), inset 0 0 0 1px color-mix(in oklab, var(--neon) 48%, transparent);
      transform:translateZ(0); animation:shine 2.2s linear infinite
    }
    .now--primary::after{
      content:""; position:absolute; inset:0; border-radius:12px; padding:1px;
      background:linear-gradient(90deg, var(--neon), var(--neon-2), var(--neon)); -webkit-mask:
      linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite: exclude; opacity:.9;
      animation:border-run 3.5s linear infinite
    }
    .now--overlap{ background:linear-gradient(180deg, color-mix(in oklab, var(--neon-2) 12%, transparent), color-mix(in oklab, var(--neon) 6%, transparent)); box-shadow:0 8px 22px color-mix(in oklab, var(--neon-2) 16%, transparent), inset 0 0 0 1px color-mix(in oklab, var(--neon-2) 44%, transparent) }
    @keyframes border-run{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
    @keyframes shine{0%{--glow:0 0 0 0 rgba(100,255,218,0)}50%{--glow:0 0 24px 4px rgba(100,255,218,.25)}100%{--glow:0 0 0 0 rgba(100,255,218,0)}}

    .badge{display:inline-flex; align-items:center; gap:8px; padding:4px 10px; border-radius:999px; font-size:.78rem; border:1px solid var(--stroke); background:color-mix(in oklab, var(--neon) 12%, transparent)}
    .badge[data-variant="primary"]{border-color:color-mix(in oklab, var(--neon) 55%, transparent); background:color-mix(in oklab, var(--neon) 22%, transparent)}
    .badge[data-variant="overlap"]{border-color:color-mix(in oklab, var(--neon-2) 55%, transparent); background:color-mix(in oklab, var(--neon-2) 22%, transparent)}

    /* Accordion */
    details{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01)); border:1px solid var(--stroke); border-radius:12px; padding:14px 16px}
    details+details{margin-top:10px}
    summary{cursor:pointer; list-style:none; display:flex; align-items:center; justify-content:space-between; font-weight:700}
    summary::-webkit-details-marker{display:none}

    /* Checklist */
    .checklist{display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:10px}
    .item{display:flex; align-items:center; gap:12px; padding:12px; border:1px solid var(--stroke); border-radius:12px; background:rgba(255,255,255,.03)}
    .item input{accent-color:var(--neon); width:18px; height:18px}
    .status{margin-left:auto; font-weight:700; color:var(--ok)}

    /* Progress */
    .progress{height:10px; background:rgba(255,255,255,.05); border:1px solid var(--stroke); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--neon), var(--neon-2)); box-shadow:0 0 18px color-mix(in oklab, var(--neon) 35%, transparent) inset}

    /* Footer */
    footer{padding:40px 16px 80px; text-align:center; color:var(--muted)}

    /* Floating widgets */
    .to-top{position:fixed; right:18px; bottom:18px; z-index:11; opacity:.9}

    /* Subtle in-view animation */
    .reveal{transform:translateY(16px); opacity:0; transition:all .6s ease}
    .reveal.show{transform:none; opacity:1}

    /* Utility chips & controls */
    .controls{display:flex; flex-wrap:wrap; gap:8px}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border:1px solid var(--stroke); border-radius:999px; background:var(--glass)}
    .chip input[type="color"]{inline-size:26px; block-size:26px; border:none; background:transparent; padding:0; border-radius:6px}

    /* Pomodoro */
    .pomo{display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px; margin-top:8px}
    .pomo-time{font-family:var(--display); font-weight:800; font-size:clamp(28px,4.6vw,42px)}
    .ring{--size:86px; inline-size:var(--size); block-size:var(--size); border-radius:50%; border:6px solid var(--stroke); position:relative}
    .ring>i{position:absolute; inset:0; border-radius:50%; mask:radial-gradient(closest-side, transparent 66%, #000 67%); background:conic-gradient(var(--neon) var(--deg,0deg), transparent 0)}

    /* Clock */
    .clock{font-feature-settings:"tnum" 1, "ss01" 1; font-variant-numeric:tabular-nums; font-family:var(--display); font-weight:800}

    /* Nice mobile scrollbars */
    @supports (scrollbar-color: auto) {
      .table-wrap{scrollbar-width:thin; scrollbar-color: color-mix(in oklab, var(--neon) 40%, transparent) transparent}
    }
    .table-wrap::-webkit-scrollbar{height:10px}
    .table-wrap::-webkit-scrollbar-thumb{background:linear-gradient(90deg, var(--neon), var(--neon-2)); border-radius:999px}
  </style>
</head>
<body>
  <!-- Starfield -->
  <div class="stars" aria-hidden="true"></div>

  <header>
    <div class="mast">
      <h1>ğŸ’ª STRICT PROTOCOL: LIFE 2.0 <span class="ping" aria-hidden="true"></span></h1>
      <p class="subtitle">Youâ€™re not restarting your life â€” youâ€™re rebuilding it stronger, calmer, and laserâ€‘focused.</p>
      <span class="motto" title="Core mantra">Motto: Simple Â· Focused Â· Unstoppable</span>
    </div>
  </header>

  <nav class="nav" aria-label="Primary">
    <div class="wrap">
      <a href="#routine">ğŸ•— Routine</a>
      <a href="#energizer">ğŸ’¥ Energizer</a>
      <a href="#hydration">ğŸ’§ Hydration</a>
      <a href="#rules">ğŸ“œ Rules</a>
      <a href="#dashboard">âš™ï¸ Dashboard</a>
      <a href="#narrative">ğŸ“– Narrative</a>
      <div class="right controls">
        <button class="btn" id="focusToggle" aria-pressed="false" title="Reduce distractions">ğŸ§  Focus</button>
        <button class="btn" id="themeToggle" aria-pressed="false" title="Toggle light/dark">ğŸŒ“ Theme</button>
        <span class="chip" title="Pick accent color">ğŸ¨ Accent <input id="accentPicker" type="color" value="#64ffda" aria-label="Pick accent color"></span>
        <span class="chip clock" id="liveClock" aria-live="polite">--:--</span>
      </div>
    </div>
  </nav>

  <main class="container">
    <!-- Routine -->
    <section id="routine" class="card reveal">
      <h2>ğŸ•— Daily Routine Table</h2>
      <p class="subtitle">Mobile-friendly cards below 720px. Current blocks glow stronger.</p>
      <div class="table-wrap">
        <table class="table" id="routineTable" aria-label="Daily routine table">
          <thead>
            <tr><th style="width:32%">Time</th><th>Routine</th><th style="width:26%">Status</th></tr>
          </thead>
          <tbody>
            <tr><td>8:30 AM</td><td>ğŸŒ Wake Up</td><td></td></tr>
            <tr><td>8:30â€“8:35 AM</td><td>ğŸ’§ Hydrate</td><td></td></tr>
            <tr><td>8:35â€“9:30 AM</td><td>ğŸ‹ï¸ Morning Energizer</td><td></td></tr>
            <tr><td>9:30â€“10:30 AM</td><td>ğŸ§¼ Grooming & Prep</td><td></td></tr>
            <tr><td>10:30 AM</td><td>ğŸ³ Breakfast</td><td></td></tr>
            <tr><td>11:00 AM â€“ 8:00 PM</td><td>ğŸ’¼ Deep Work Zone</td><td></td></tr>
            <tr><td>12:30â€“1:00 PM</td><td>ğŸ¥— Lunch</td><td></td></tr>
            <tr><td>2:30 PM</td><td>ğŸ’§ Hydration Checkpoint</td><td></td></tr>
            <tr><td>4:30â€“6:30 PM</td><td>ğŸŒ‡ Evening Refresh</td><td></td></tr>
            <tr><td>7:30â€“8:30 PM</td><td>ğŸ½ï¸ Dinner</td><td></td></tr>
            <tr><td>9:30 PM</td><td>ğŸ’§ Final Hydration</td><td></td></tr>
            <tr><td>10:00â€“11:30 PM</td><td>ğŸ“– Reflection & Gratitude</td><td></td></tr>
            <tr><td>11:30â€“12:00 AM</td><td>ğŸ§´ Night Care</td><td></td></tr>
            <tr><td>12:00â€“12:30 AM</td><td>ğŸ˜´ Sleep</td><td></td></tr>
          </tbody>
        </table>
      </div>
      <div class="controls" style="margin-top:10px">
        <button class="btn" id="addRow">â• Add Row</button>
        <button class="btn" id="saveRoutine">ğŸ’¾ Save Routine</button>
        <button class="btn" id="resetRoutine">â†©ï¸ Reset</button>
        <small>Drag to reorder (Alt+â†‘/â†“), tap cells to edit.</small>
      </div>
    </section>

    <!-- Energizer -->
    <section id="energizer" class="grid grid-2 reveal">
      <div class="card">
        <h2>ğŸŒ Morning Energizer <small style="color:var(--muted); font-weight:600">(30â€“40 min)</small></h2>
        <details open>
          <summary>1. Warm-Up (5 min)</summary>
          <p>Light movements â€” neck rolls, arm circles, leg swings, and 1â€‘min jog.</p>
        </details>
        <details>
          <summary>2. Skipping / Cardio (5â€“7 min)</summary>
          <p>300â€“500 skips or fast jumping in place. Build stamina and focus.</p>
        </details>
        <details>
          <summary>3. Strength Set (15â€“20 min)</summary>
          <p>Pushâ€‘ups, squats, planks, mountain climbers â€” 3 rounds. Form > speed.</p>
        </details>
        <details>
          <summary>4. Stretch & Breath (5â€“10 min)</summary>
          <p>Catâ€“Cow, side bends, butterfly stretch, and deep breathing.</p>
        </details>
        <details>
          <summary>5. Meditation (5 min)</summary>
          <p>Mantra: â€œI am calm, strong, and grateful.â€ Finish with warm water.</p>
        </details>
      </div>
      <div class="card">
        <h2>â±ï¸ Focus Pod (Pomodoro)</h2>
        <div class="pomo">
          <div>
            <div class="pomo-time" id="pomoTime">25:00</div>
            <div class="controls" style="margin-top:6px">
              <button class="btn" id="pomoStart">â–¶ï¸ Start</button>
              <button class="btn" id="pomoPause">â¸ï¸ Pause</button>
              <button class="btn" id="pomoReset">ğŸ” Reset</button>
              <button class="btn" id="pomoMode">ğŸ… 25/5</button>
            </div>
            <small id="pomoStatus" style="display:block; margin-top:6px">Work: 25 min â€¢ Break: 5 min</small>
          </div>
          <div class="ring" aria-hidden="true"><i id="pomoRing"></i></div>
        </div>
        <small>Tip: Use <kbd>Space</kbd> to start/pause, <kbd>R</kbd> to reset.</small>
      </div>
    </section>

    <!-- Hydration -->
    <section id="hydration" class="card reveal">
      <h2>ğŸ’§ Hydration Schedule</h2>
      <div class="table-wrap">
        <table class="table" id="hydrationTable" aria-label="Hydration schedule">
          <thead><tr><th>Time</th><th>Amount</th><th></th></tr></thead>
          <tbody>
            <tr><td>8:30 AM</td><td>500 ml</td><td></td></tr>
            <tr><td>10:00 AM</td><td>500 ml</td><td></td></tr>
            <tr><td>11:30 AM</td><td>500 ml</td><td></td></tr>
            <tr><td>2:30 PM</td><td>500 ml</td><td></td></tr>
            <tr><td>6:00 PM</td><td>500 ml</td><td></td></tr>
            <tr><td>9:30 PM</td><td>500 ml</td><td></td></tr>
            <tr><td><strong>Total</strong></td><td>~3 Liters/day</td><td></td></tr>
          </tbody>
        </table>
      </div>
      <div class="controls" style="margin-top:10px">
        <button class="btn" id="addWater">â• Add Slot</button>
        <button class="btn" id="saveWater">ğŸ’¾ Save</button>
        <button class="btn" id="resetWater">â†©ï¸ Reset</button>
        <small>Click a cell to edit. Add reminders below.</small>
      </div>
      <div class="controls" style="margin-top:10px">
        <label class="chip">ğŸ”” Hydrate every
          <select id="hydrateInterval" style="background:transparent; color:inherit; border:none">
            <option value="0">(off)</option>
            <option value="45">45 min</option>
            <option value="60" selected>60 min</option>
            <option value="90">90 min</option>
          </select>
        </label>
        <small>Reminders use browser notifications (grant permission when asked).</small>
      </div>
    </section>

    <!-- Rules -->
    <section id="rules" class="card reveal">
      <h2>ğŸ“œ Discipline Rules</h2>
      <ul>
        <li>One day = one victory. Win today, reset tomorrow.</li>
        <li>Donâ€™t chase motivation â€” manufacture discipline.</li>
        <li>Cut noise: no pointless scrolling or gossip.</li>
        <li>Trust timing â€” move with faith, not fear.</li>
        <li>Stay wellâ€‘groomed, humble, consistent.</li>
        <li>Keep your circle small, loyal, positive.</li>
        <li>When tired, rest â€” donâ€™t quit.</li>
        <li>Stick to the plan â€” less thinking, more doing.</li>
        <li>No adult content â€” protect energy & focus.</li>
      </ul>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="card reveal">
      <h2>âš™ï¸ Daily Summary Dashboard</h2>
      <div style="margin:.4rem 0 .8rem; color:var(--muted)">Tick items as you complete them. Progress autoâ€‘updates & saves locally.</div>
      <div class="progress" aria-label="Completion progress"><i id="progressBar"></i></div>
      <div class="checklist" id="checks">
        <label class="item"><input type="checkbox" data-key="wake"><span>â° Wake â€” <em style="color:var(--muted)">8:30 AM</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="sleep"><span>ğŸ˜´ Sleep â€” <em>12:00â€“12:30 AM</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="water"><span>ğŸ’§ Water â€” <em>6 Ã— 500 ml</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="meals"><span>ğŸ½ï¸ Meals â€” <em>3 clean + green tea</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="exercise"><span>ğŸ’ª Exercise â€” <em>45â€“60 mins</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="work"><span>ğŸ’¼ Work â€” <em>11:00 AM â€“ 8:00 PM</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="avoid"><span>ğŸš« Avoid â€” <em>Sugar, junk, distractions</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="mindset"><span>ğŸ§˜ Mindset â€” <em>Simple. Focused. Unstoppable.</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="groom"><span>ğŸ‘• Grooming â€” <em>Daily</em></span><span class="status">âœ…</span></label>
        <label class="item"><input type="checkbox" data-key="circle"><span>ğŸ§‘â€ğŸ¤â€ğŸ§‘ Circle â€” <em>Small & Positive</em></span><span class="status">âœ…</span></label>
      </div>
      <div class="controls" style="margin-top:10px">
        <button class="btn" id="markAll">âœ… Toggle All</button>
        <button class="btn" id="exportData">ğŸ“¤ Export</button>
        <button class="btn" id="importData">ğŸ“¥ Import</button>
        <input type="file" id="importFile" accept="application/json" style="display:none" />
        <small id="streakInfo">ğŸ”¥ Streak: <strong id="streakCount">0</strong> days</small>
      </div>
    </section>

    <!-- Narrative -->
    <section id="narrative" class="card reveal">
      <h2>ğŸ“– Narrative</h2>
      <p>Each morning begins with silence â€” the calm before greatness. You rise with the sun, body awake, mind grounded. The world moves in chaos, but you walk with clarity. Every meal is fuel, every workout a promise, every task a brick in your foundation. By night, youâ€™ve moved closer to mastery â€” quietly, consistently, faithfully. You close your eyes, not tired, but satisfied â€” ready to repeat and rise again.</p>
    </section>

  </main>

  <footer>
    <div>Built for your <strong>LIFE 2.0</strong> era. Stay calm. Stay sharp. Stay unstoppable.</div>
  </footer>

  <a href="#top" class="btn to-top" title="Back to Top">â¬†ï¸</a>

  <script>
    /* ========= Helpers ========= */
    const $ = (q, s=document) => s.querySelector(q);
    const $$ = (q, s=document) => Array.from(s.querySelectorAll(q));
    const storage = {
      set:(k,v)=>localStorage.setItem(k, JSON.stringify(v)),
      get:(k,d=null)=>{ try{ return JSON.parse(localStorage.getItem(k)) ?? d }catch{ return d } }
    }

    /* ========= Starfield ========= */
    ;(function(){
      const s=$('.stars');
      for(let i=0;i<90;i++){
        const sp=document.createElement('span');
        sp.style.left=Math.random()*100+'%';
        sp.style.top=Math.random()*100+'%';
        sp.style.opacity=(.4+Math.random()*0.6).toFixed(2);
        sp.style.setProperty('--d', (4+Math.random()*6)+'s');
        s.appendChild(sp);
      }
    })();

    /* ========= Inâ€‘view reveal ========= */
    const io=new IntersectionObserver(entries=>{
      entries.forEach(e=> e.target.classList.toggle('show', e.isIntersecting));
    },{threshold:.12});
    $$('.reveal').forEach(el=>io.observe(el));

    /* ========= Smooth anchor scroll (plus native scroll-behavior) ========= */
    $$('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const id=a.getAttribute('href');
        const target=$(id);
        if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    /* ========= Theme & Accent ========= */
    const themeToggle = $('#themeToggle');
    const accentPicker = $('#accentPicker');

    function applyAccent(hex){
      document.documentElement.style.setProperty('--neon', hex);
      storage.set('life20_accent', hex);
    }
    function setTheme(mode){
      document.body.classList.toggle('light', mode==='light');
      storage.set('life20_theme', mode);
      themeToggle.setAttribute('aria-pressed', mode==='light');
    }
    themeToggle.addEventListener('click',()=>{
      const light = !document.body.classList.contains('light');
      setTheme(light? 'light':'dark');
    });
    accentPicker.addEventListener('input', e=>applyAccent(e.target.value));
    // load prefs
    (function(){
      const savedTheme=storage.get('life20_theme');
      if(savedTheme) setTheme(savedTheme);
      const savedAccent=storage.get('life20_accent');
      if(savedAccent) applyAccent(savedAccent);
    })();

    /* ========= Live Clock ========= */
    const liveClock = $('#liveClock');
    function upClock(){
      const d=new Date();
      liveClock.textContent = d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    }
    upClock(); setInterval(upClock, 1000*15);

    /* ========= Focus Mode ========= */
    const focusBtn=$('#focusToggle');
    let focus=false;
    focusBtn.addEventListener('click',()=>{
      focus=!focus;
      document.body.style.filter=focus? 'grayscale(.08) contrast(1.06)' : '';
      $$('section').forEach(sec=>sec.style.opacity=focus? .92 : 1);
      focusBtn.textContent= focus? 'ğŸ§  Focus On' : 'ğŸ§  Focus';
      focusBtn.setAttribute('aria-pressed', String(focus));
    });

    /* ========= Routine: inline edit, drag, save ========= */
    const routineKey='life20_routine_v2';
    const routineTable = $('#routineTable tbody');

    function loadRoutine(){
      const saved = storage.get(routineKey);
      if(!saved) return;
      routineTable.innerHTML = saved;
    }
    function saveRoutine(){ storage.set(routineKey, routineTable.innerHTML); toast('âœ… Routine saved'); highlightNow(); bindRowEvents(); addThLabels('#routineTable'); }
    function resetRoutine(){ localStorage.removeItem(routineKey); location.reload(); }

    function makeEditable(td){ td.contentEditable = 'true'; td.spellcheck=false; td.addEventListener('blur', saveRoutine, {once:false}); }
    function bindRowEvents(){
      $$('#routineTable tbody tr').forEach((tr)=>{
        [...tr.children].forEach((td,i)=>{ if(i<2) makeEditable(td); });
        tr.draggable=true;
        tr.addEventListener('dragstart', e=>{ tr.classList.add('dragging'); e.dataTransfer.setData('text/plain','drag'); });
        tr.addEventListener('dragend', ()=>{ tr.classList.remove('dragging'); saveRoutine(); });
      });
      routineTable.addEventListener('dragover', e=>{
        e.preventDefault();
        const after = getDragAfter(routineTable, e.clientY);
        const dragging = $('.dragging');
        if(!dragging) return;
        if(after == null){ routineTable.appendChild(dragging); }
        else { routineTable.insertBefore(dragging, after); }
      });
      // keyboard reorder
      routineTable.addEventListener('keydown', e=>{
        if(!(e.altKey && (e.key==='ArrowUp' || e.key==='ArrowDown'))) return;
        const tr = e.target.closest('tr'); if(!tr) return;
        e.preventDefault();
        if(e.key==='ArrowUp' && tr.previousElementSibling){ routineTable.insertBefore(tr, tr.previousElementSibling); saveRoutine(); }
        if(e.key==='ArrowDown' && tr.nextElementSibling){ routineTable.insertBefore(tr.nextElementSibling, tr); saveRoutine(); }
      });
    }
    function getDragAfter(container, y){
      const els=[...container.querySelectorAll('tr:not(.dragging)')];
      return els.reduce((closest, child)=>{
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height/2;
        if(offset < 0 && offset > closest.offset){ return {offset, element:child} } else return closest;
      }, {offset: Number.NEGATIVE_INFINITY}).element;
    }

    $('#addRow').addEventListener('click',()=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>--:-- --</td><td>ğŸ†• New</td><td></td>`;
      routineTable.appendChild(tr); bindRowEvents(); saveRoutine();
    });
    $('#saveRoutine').addEventListener('click', saveRoutine);
    $('#resetRoutine').addEventListener('click', resetRoutine);

    loadRoutine(); bindRowEvents();

    /* ========= Add data-th labels for mobile stack tables ========= */
    function addThLabels(selector){
      const table = document.querySelector(selector);
      if(!table) return;
      const heads = [...table.querySelectorAll('thead th')].map(th=>th.textContent.trim());
      table.querySelectorAll('tbody tr').forEach(tr=>{
        [...tr.children].forEach((td,i)=> td.setAttribute('data-th', heads[i] || ''));
      });
    }
    addThLabels('#routineTable');
    addThLabels('#hydrationTable');

    /* ========= Multiâ€‘row highlight of current routine ========= */
    function toMinutes(h,m,ampm){ h = (h%12) + (ampm==='PM'?12:0); return h*60 + m }
    function parseRange(label){
      const clean = label.replace(/\s+/g,' ').replace(/â€“/g,'-').replace(/\s?-\s?/, '-').trim();
      if(clean.includes('-')){
        const [a,b] = clean.split('-');
        const tail = (b.match(/AM|PM/i)||[''])[0].toUpperCase();
        const apA = (a.match(/AM|PM/i)||[tail||'AM'])[0].toUpperCase();
        const apB = (b.match(/AM|PM/i)||[apA||'AM'])[0].toUpperCase();
        const [h1,m1] = (a.match(/(\d{1,2}):(\d{2})/)||[]).slice(1).map(Number);
        const [h2,m2] = (b.match(/(\d{1,2}):(\d{2})/)||[]).slice(1).map(Number);
        const start = toMinutes(h1||0,m1||0, apA||'AM');
        const end = toMinutes(h2||0,m2||0, apB||'AM');
        return {start,end,label:clean};
      } else {
        const m = clean.match(/(\d{1,2}):(\d{2})\s?(AM|PM)/i);
        if(!m) return null;
        const start = toMinutes(+m[1], +m[2], m[3].toUpperCase());
        return {start, end:start+15, label:clean};
      }
    }

    function highlightNow(){
      const rows=[...$('#routineTable tbody').querySelectorAll('tr')];
      const now=new Date();
      const minsLocal=now.getHours()*60 + now.getMinutes();
      rows.forEach(r=>{ r.classList.remove('now','now--primary','now--overlap'); const cell=r.children[2]; if(cell) cell.innerHTML=''; });
      const matches=[];
      rows.forEach(r=>{
        const str=r.children[0].textContent.trim();
        const range=parseRange(str); if(!range) return;
        let {start,end}=range; if(end < start) end += 24*60; // wrap midnight
        let cur=minsLocal; if(minsLocal < 240 && start > 20*60) cur += 24*60;
        if(cur>=start && cur<=end){ matches.push({row:r, start, end, dur:end-start}); }
      });
      if(matches.length){
        let primaryIndex=0; matches.forEach((m,i)=>{ if(m.dur < matches[primaryIndex].dur) primaryIndex=i; });
        matches.forEach((m,i)=>{
          m.row.classList.add('now');
          if(i===primaryIndex){ m.row.classList.add('now--primary'); m.row.children[2].innerHTML='<span class="badge" data-variant="primary">NOW â€¢ primary</span>'; }
          else { m.row.classList.add('now--overlap'); m.row.children[2].innerHTML='<span class="badge" data-variant="overlap">NOW â€¢ overlap</span>'; }
        });
      }
    }
    highlightNow(); setInterval(highlightNow, 60*1000);

    /* ========= Dashboard persistence & progress ========= */
    const checks=$('#checks');
    const boxes=[...checks.querySelectorAll('input[type="checkbox"]')];
    const bar=$('#progressBar');
    const checkKey='life20_checks';

    function saveChecks(){ const data=Object.fromEntries(boxes.map(b=>[b.dataset.key, b.checked])); storage.set(checkKey, data); updateProgress(); }
    function loadChecks(){ const data=storage.get(checkKey, {}); boxes.forEach(b=> b.checked= !!data[b.dataset.key]); updateProgress(); }
    function updateProgress(){ const done=boxes.filter(b=>b.checked).length; const pct=Math.round(done/boxes.length*100); bar.style.width=pct+'%'; bar.setAttribute('aria-valuenow', pct); bar.title=pct+'% completed'; }
    boxes.forEach(b=> b.addEventListener('change', ()=>{ saveChecks(); maybeStreak(); }));
    $('#markAll').addEventListener('click',()=>{ const all=boxes.every(b=>b.checked); boxes.forEach(b=> b.checked=!all); saveChecks(); });
    loadChecks();

    /* ========= Export / Import ========= */
    $('#exportData').addEventListener('click',()=>{
      const blob=new Blob([JSON.stringify({
        routine: $('#routineTable tbody').innerHTML,
        checks: storage.get(checkKey, {}),
        hydration: $('#hydrationTable tbody').innerHTML,
        prefs: { theme: storage.get('life20_theme','dark'), accent: storage.get('life20_accent','#64ffda') },
        streak: storage.get('life20_streak', {count:0, last:''})
      }, null, 2)], {type:'application/json'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='life20-backup.json'; a.click(); URL.revokeObjectURL(a.href);
    });
    $('#importData').addEventListener('click',()=>$('#importFile').click());
    $('#importFile').addEventListener('change', async (e)=>{
      const file=e.target.files?.[0]; if(!file) return;
      const text=await file.text();
      try{
        const data=JSON.parse(text);
        if(data.routine) { $('#routineTable tbody').innerHTML=data.routine; bindRowEvents(); }
        if(data.hydration) { $('#hydrationTable tbody').innerHTML=data.hydration; bindHydrationEvents(); }
        if(data.checks) { storage.set(checkKey, data.checks); loadChecks(); }
        if(data.prefs){ setTheme(data.prefs.theme||'dark'); if(data.prefs.accent) applyAccent(data.prefs.accent); }
        if(data.streak) storage.set('life20_streak', data.streak);
        saveRoutine(); saveWater(); addThLabels('#routineTable'); addThLabels('#hydrationTable'); toast('âœ… Data imported');
      }catch(err){ toast('âš ï¸ Import failed'); console.error(err); }
    });

    /* ========= Hydration editable & reminders ========= */
    const waterKey='life20_water_v2';
    const hydrationTable = $('#hydrationTable tbody');

    function loadWater(){ const saved = storage.get(waterKey); if(saved) hydrationTable.innerHTML = saved; }
    function saveWater(){ storage.set(waterKey, hydrationTable.innerHTML); toast('ğŸ’§ Hydration saved'); bindHydrationEvents(); addThLabels('#hydrationTable'); }
    function resetWater(){ localStorage.removeItem(waterKey); location.reload(); }
    function bindHydrationEvents(){ $$('#hydrationTable tbody tr').forEach(tr=>{ [...tr.children].forEach(td=>{ if(td.cellIndex<2){ td.contentEditable='true'; td.spellcheck=false; td.addEventListener('blur', saveWater); } }); }); }

    $('#addWater').addEventListener('click',()=>{ const tr=document.createElement('tr'); tr.innerHTML='<td>--:-- --</td><td>250 ml</td><td></td>'; hydrationTable.appendChild(tr); bindHydrationEvents(); saveWater(); });
    $('#saveWater').addEventListener('click', saveWater);
    $('#resetWater').addEventListener('click', resetWater);

    loadWater(); bindHydrationEvents();

    // Notifications
    const intervalSel = $('#hydrateInterval');
    let hydrateTimer=null; let hydrateMinutes = +intervalSel.value;
    intervalSel.addEventListener('change',()=>{ hydrateMinutes=+intervalSel.value; scheduleHydrate(); storage.set('life20_hydrate_every', hydrateMinutes); });
    (function(){ const saved=storage.get('life20_hydrate_every'); if(saved!=null){ intervalSel.value=saved; hydrateMinutes=+saved; } scheduleHydrate(); })();

    async function scheduleHydrate(){
      if(hydrateTimer) clearInterval(hydrateTimer);
      if(!('Notification' in window)) return;
      if(hydrateMinutes===0) return;
      if(Notification.permission!=='granted'){
        try{ await Notification.requestPermission(); }catch{ /* ignore */ }
      }
      if(Notification.permission==='granted'){
        hydrateTimer = setInterval(()=> new Notification('ğŸ’§ Hydration', {body:'Time to drink water!', silent:true}), hydrateMinutes*60*1000);
      }
    }

    /* ========= Pomodoro ========= */
    const pomoTime=$('#pomoTime');
    const pomoRing=$('#pomoRing');
    const statusEl=$('#pomoStatus');
    let work=25, rest=5, mode='work', secs=work*60, tick=null, running=false;

    function setRing(){ const total=(mode==='work'? work:rest)*60; const deg=(secs/total)*360; pomoRing.style.setProperty('--deg', deg+'deg'); }
    function view(){ const mm=String(Math.floor(secs/60)).padStart(2,'0'); const ss=String(secs%60).padStart(2,'0'); pomoTime.textContent=`${mm}:${ss}`; setRing(); }
    function start(){ if(running) return; running=true; tick=setInterval(()=>{ secs--; if(secs<0){ next(); } view(); }, 1000); }
    function pause(){ running=false; clearInterval(tick); }
    function reset(){ pause(); mode='work'; secs=work*60; view(); statusEl.textContent=`Work: ${work} min â€¢ Break: ${rest} min`; }
    function next(){ if(mode==='work'){ mode='rest'; secs=rest*60; toast('ğŸµ Break time'); } else { mode='work'; secs=work*60; toast('ğŸš€ Back to work'); } }

    $('#pomoStart').addEventListener('click', start);
    $('#pomoPause').addEventListener('click', pause);
    $('#pomoReset').addEventListener('click', reset);
    $('#pomoMode').addEventListener('click',()=>{ [work,rest]=[25,5]; reset(); toast('ğŸ… Classic 25/5 set'); });
    document.addEventListener('keydown', e=>{ if(e.target.closest('input,textarea,[contenteditable="true"]')) return; if(e.code==='Space'){ e.preventDefault(); running? pause(): start(); } if(e.key.toLowerCase()==='r'){ reset(); } });
    reset();

    /* ========= Streak counter ========= */
    const streakKey='life20_streak';
    const streakCountEl=$('#streakCount');
    function todayStr(){ return new Date().toDateString(); }
    function maybeStreak(){
      const data=storage.get(streakKey, {count:0, last:''});
      const done=boxes.filter(b=>b.checked).length===boxes.length; // all complete
      const today=todayStr();
      if(done && data.last!==today){ data.count = (data.last && (new Date(today) - new Date(data.last) === 86400000)) ? data.count+1 : 1; data.last=today; storage.set(streakKey, data); toast(`ğŸ”¥ New streak: ${data.count}`); }
      streakCountEl.textContent = (storage.get(streakKey, {count:0}).count)||0;
    }
    // on load
    streakCountEl.textContent = (storage.get(streakKey, {count:0}).count)||0;

    /* ========= Toasts ========= */
    const toaster = document.createElement('div');
    toaster.style.position='fixed'; toaster.style.left='50%'; toaster.style.bottom='20px'; toaster.style.transform='translateX(-50%)'; toaster.style.zIndex='9999';
    document.body.appendChild(toaster);
    function toast(txt){ const el=document.createElement('div'); el.textContent=txt; el.style.cssText='margin:6px 0; padding:10px 14px; border-radius:12px; border:1px solid var(--stroke); background:var(--card); box-shadow:var(--shadow);'; toaster.appendChild(el); setTimeout(()=>el.remove(), 2500); }

    /* ========= Back to top ========= */
    const toTop=$('.to-top'); toTop.addEventListener('click', e=>{ e.preventDefault(); window.scrollTo({top:0, behavior:'smooth'}); });
  </script>
</body>
</html>
