<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>HappyLife ‚Äî Ikigai & Kintsugi (Print & Mobile Friendly)</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700;900&family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg1:#07101a; --bg2:#0b1720;
    --accent:#ffd166; --accent-2:#ff8a4b;
    --muted:#9aa6b2; --glass:rgba(255,255,255,0.04);
    --card:rgba(255,255,255,0.03); --radius:16px;
    --maxw:1100px; --petal-pink:#ffdbe6; --petal-deep:#ff9bb3;
  }

  /* base */
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:
    radial-gradient(1200px 600px at 10% 20%, rgba(255,209,120,0.02), transparent 6%),
    radial-gradient(900px 500px at 90% 80%, rgba(255,118,64,0.01), transparent 6%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#e6eef6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    -webkit-font-feature-settings: "kern"; font-feature-settings: "kern"; }

  .wrap{max-width:calc(var(--maxw)+40px);margin:20px auto;padding:18px;position:relative;}

  /* Scroll progress */
  #scrollProgress{position:fixed;left:0;top:0;height:4px;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%;z-index:1600;box-shadow:0 6px 18px rgba(0,0,0,0.35)}

  /* NAV */
  nav.navbar{position:sticky;top:14px;z-index:1500;display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));backdrop-filter: blur(6px);border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 30px rgba(2,6,23,0.6)}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:52px;height:52px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));box-shadow: inset 0 -10px 30px rgba(0,0,0,0.35);border:1px solid rgba(255,255,255,0.03);}
  .brand h3{margin:0;font-family:'Playfair Display',serif;color:var(--accent);letter-spacing:0.3px}
  .nav-links{display:flex;gap:8px;align-items:center}
  .nav-links a{color:#eaf2ff;text-decoration:none;padding:8px 12px;border-radius:10px;transition:all .18s ease;font-weight:600;font-size:14px}
  .nav-links a:hover{transform:translateY(-4px);background:rgba(255,255,255,0.02);box-shadow:0 8px 28px rgba(0,0,0,0.45)}
  .nav-cta{background:linear-gradient(90deg,rgba(255,209,102,0.12),rgba(255,209,102,0.04));border:1px solid rgba(255,209,102,0.14);color:var(--accent);padding:8px 14px;border-radius:12px;cursor:pointer}

  .hamburger{display:none;border:0;background:transparent;padding:8px;border-radius:10px;cursor:pointer}
  .hamburger svg{display:block}

  /* HERO */
  header.hero{display:flex;gap:18px;align-items:center;justify-content:space-between;padding:20px;border-radius:calc(var(--radius)+6px);position:relative;overflow:hidden;box-shadow:0 12px 40px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));}
  .hero-left{display:flex;gap:14px;align-items:center;flex:1;min-width:0}
  .badge{width:120px;height:120px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-direction:column;background:linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));box-shadow: inset 0 -12px 40px rgba(0,0,0,0.35);border:1px solid rgba(255,255,255,0.03);transform:translateY(0);animation: bob 6s ease-in-out infinite}
  .badge .emoji{font-size:44px;filter:drop-shadow(0 6px 18px rgba(0,0,0,0.6))}
  .badge h4{margin:4px 0 0;font-family:'Playfair Display',serif;color:var(--accent);font-weight:700;font-size:16px}
  .title{font-family:'Playfair Display',serif;font-size:clamp(18px,3.8vw,40px);line-height:1.02;margin:0;color:#fff;text-shadow:0 8px 30px rgba(0,0,0,0.6);transition:transform .45s ease}
  .subtitle{margin-top:8px;color:var(--muted);font-size:13.5px}

  .hero-right{display:flex;gap:12px;align-items:center}
  .cta{background: linear-gradient(90deg, rgba(255,209,102,0.10), rgba(255,209,102,0.06));border:1px solid rgba(255,209,102,0.16);color:var(--accent);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600;backdrop-filter: blur(6px);transition: transform .18s ease, box-shadow .18s ease}
  .cta:active{transform:translateY(1px) scale(.998)}
  .cta:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,0,0,0.45)}

  /* layout */
  main{margin-top:18px;display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:20px;box-shadow:0 12px 40px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.02);color:#e9f2ff;overflow:hidden;transition:transform .28s ease}
  .card:hover{transform:translateY(-6px);box-shadow:0 20px 60px rgba(2,6,23,0.7)}
  .lead{color:#dfe9f9;font-size:15.6px;line-height:1.62}
  h2.section-title{font-family:'Playfair Display',serif;margin:2px 0 12px;color:#fff;font-size:20px}
  .section{margin-bottom:18px;animation: appearUp .9s ease both}
  ul.clean{padding-left:18px;margin:8px 0 0}
  ul.clean li{margin:8px 0;color:#dbeaf8;line-height:1.55}
  .small{color:var(--muted);font-size:13px}

  aside.side{position:relative;display:flex;flex-direction:column;gap:16px}
  .gold-line{height:6px;border-radius:999px;background:linear-gradient(90deg, rgba(255,213,102,1), rgba(255,153,51,0.98));box-shadow:0 6px 22px rgba(255,171,63,0.12) inset;margin:10px 0 14px;transform-origin:left;animation: grow .7s ease both}

  /* cherry petals */
  .petals{position:fixed;left:0;right:0;top:0;bottom:0;pointer-events:none;overflow:hidden;z-index:1200}
  .petal{position:absolute;width:18px;height:18px;border-radius:70% 30% 60% 40%;background:linear-gradient(135deg,var(--petal-pink),var(--petal-deep));opacity:0.95;filter:drop-shadow(0 6px 12px rgba(0,0,0,0.18));transform:rotate(25deg)}
  @keyframes float1{0%{transform:translateY(-12vh) rotate(0deg) translateX(0)}50%{transform:translateY(50vh) rotate(120deg) translateX(10vw)}100%{transform:translateY(110vh) rotate(260deg) translateX(-8vw)}}
  @keyframes float2{0%{transform:translateY(-20vh) rotate(10deg) translateX(0)}50%{transform:translateY(55vh) rotate(-100deg) translateX(-6vw)}100%{transform:translateY(125vh) rotate(-220deg) translateX(6vw)}}

  /* tree silhouette */
  .cherry-tree{position:fixed;left:18px;bottom:18px;opacity:0.12;pointer-events:none;filter:drop-shadow(0 10px 30px rgba(255,118,64,0.04));z-index:0}

  /* modal */
  .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(2,6,23,0.65), rgba(2,6,23,0.85));z-index:1400;visibility:hidden;opacity:0;transition:opacity .2s ease,visibility .2s}
  .modal.open{visibility:visible;opacity:1}
  .modal-sheet{width:min(980px,94%);max-height:86vh;overflow:auto;border-radius:14px;background:linear-gradient(180deg,#07101a,#0b1620);padding:20px;border:1px solid rgba(255,209,102,0.06)}

  /* buttons ghost */
  .ghost{background:transparent;border:1px dashed rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer}

  /* small touches */
  .pill{padding:6px 10px;border-radius:999px;font-weight:600;background: linear-gradient(90deg, rgba(255,209,102,0.06), rgba(255,209,102,0.02));color:var(--accent);border:1px solid rgba(255,209,102,0.1);display:inline-block}

  /* responsive */
  @media (max-width:980px){
    main{grid-template-columns:1fr;gap:14px}
    .nav-links{display:none}
    .hamburger{display:block}
    .hero{padding:16px}
    .badge{width:96px;height:96px}
    .hero-right{display:none}
  }
  @media (max-width:560px){
    .wrap{padding:12px;margin:8px}
    .title{font-size:20px}
    header.hero{flex-direction:column;align-items:flex-start;gap:12px}
    .badge{width:86px;height:86px}
    .logo{width:44px;height:44px}
    .card{padding:16px}
    .nav-cta{padding:8px 10px;font-size:14px}
  }

  /* print */
  @media print{
    body{background:#fff;color:#000}
    nav.navbar, .petals, .cta, .hamburger, .kintsugi, .cherry-tree{display:none !important}
    main{grid-template-columns:1fr !important}
    .card{box-shadow:none;border-radius:0;background:transparent;color:#000;border:0;padding:0}
  }

  /* animations */
  @keyframes appearUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
  @keyframes bob{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}
  @keyframes grow{from{transform:scaleX(0)}to{transform:scaleX(1)}}

  /* focus for accessibility */
  a:focus,button:focus{outline:3px solid rgba(255,209,102,0.14);outline-offset:3px}
</style>
</head>
<body>
  <div id="scrollProgress" aria-hidden="true"></div>
  <div class="petals" aria-hidden="true"></div>

  <div class="wrap" id="pageWrap">

    <nav class="navbar" role="navigation" aria-label="Main navigation">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- blossom icon -->
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M12 2c1.1 0 2 .9 2 2 0 .3-.1.5-.2.8 1.3.5 2.4 1.4 3 2.6.2.5-.2 1-.8.9-.7-.2-1.6-.3-2.4.4-.6.5-1 1.3-1 2.1 0 .4.1.8.3 1.1-.5.1-1 .1-1.5 0-.6-.1-1-.5-1.3-1-.3-.6-.9-.9-1.5-1.1-.5-.2-1-.6-1.2-1.2-.3-.6-.3-1.4-.1-2 .2-.7.6-1.2 1.2-1.6C8.6 5 9 4.2 9 3c0-1.1.9-2 2-2z" fill="url(#g)"/>
            <defs><linearGradient id="g" x1="0" x2="1"><stop stop-color="#ffd166"/><stop offset="1" stop-color="#ff8a4b"/></linearGradient></defs>
          </svg>
        </div>
        <h3>HappyLife</h3>
      </div>

      <div class="nav-links" id="navLinks">
        <a href="#manifestoContent">Manifesto</a>
        <a href="#quick">Rituals</a>
        <a href="#gold">Principles</a>
        <button class="nav-cta" id="openManifestoBtn">Open Manifesto</button>
      </div>

      <button class="hamburger" id="hamburgerBtn" aria-label="Open menu" aria-expanded="false">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="#eaf2ff" stroke-width="1.6" stroke-linecap="round"/></svg>
      </button>
    </nav>

    <header class="hero" role="banner" aria-labelledby="heroTitle">
      <!-- subtle golden kintsugi stroke -->
      <svg class="kintsugi" width="420" height="220" viewBox="0 0 420 220" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="position:absolute;right:-40px;top:-20px;opacity:0.7;pointer-events:none;">
        <path d="M12 48C98 30 156 22 210 34C260 45 324 62 398 36" stroke="url(#g2)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
        <defs><linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#ffd166"/><stop offset="1" stop-color="#ff8a4b"/></linearGradient></defs>
      </svg>

      <div class="hero-left">
        <div class="badge" aria-hidden="true">
          <div class="emoji">üå∏</div>
          <h4>HappyLife</h4>
        </div>

        <div style="min-width:0">
          <h1 id="heroTitle" class="title">IKIGAI & KINTSUGI ‚Äî The Way I Want To Live My Life</h1>
          <div class="subtitle">A poetic, philosophical, and soulful 50-year Life Formula ‚Äî made to honor wounds and celebrate growth.</div>
        </div>
      </div>

      <div class="hero-right">
        <button class="cta" id="openManifestoTop">Open Manifesto</button>
        <button class="cta" id="downloadPrint">Printable Version</button>
      </div>
    </header>

    <main>
      <section class="card" aria-labelledby="manifestoTitle">
        <div class="gold-line" aria-hidden="true"></div>

        <div class="section reveal" id="manifestoContent">
          <h2 id="manifestoTitle" class="section-title">üå∏ IKIGAI & KINTSUGI ‚Äî THE WAY I WANT TO LIVE MY LIFE</h2>
          <div class="quote small">"A life shaped by meaning and mended with gold."</div>
        </div>

        <article class="section reveal">
          <h3 class="section-title">üå± 1. The Path of IKIGAI ‚Äî My Reason for Waking Up Each Morning</h3>
          <p class="lead">Ikigai means: <em>"A life worth living. A reason to get out of bed."</em></p>
          <p class="lead">My Ikigai is a constellation of small reasons that light my life every day.</p>

          <strong style="color:var(--accent)">‚ú® My Ikigai includes:</strong>
          <ul class="clean">
            <li><strong>Creating</strong> something I‚Äôm proud of</li>
            <li><strong>Growing</strong> a little every day</li>
            <li><strong>Loving</strong> deeply and honestly</li>
            <li><strong>Learning</strong> something new</li>
            <li><strong>Caring</strong> for my body and mind</li>
            <li><strong>Enjoying</strong> moments that make life warm</li>
            <li><strong>Sharing</strong> kindness, peace and joy</li>
            <li><strong>Becoming</strong> someone future-me respects</li>
          </ul>

          <p class="small" style="margin-top:8px">Ikigai reminds me:
            <br>üîπ Life is a slow craft
            <br>üîπ Small steps matter more than big plans
            <br>üîπ Consistency beats short bursts
            <br>üîπ Purpose is built daily, not found suddenly
          </p>
        </article>

        <article class="section reveal">
          <h3 class="section-title">üßµ 2. KINTSUGI MINDSET ‚Äî Turn Every Broken Piece into Gold</h3>
          <p class="lead">Kintsugi teaches: <em>"Repair with gold; the crack becomes the beauty."</em></p>
          <p class="lead">Instead of hiding my cracks, I will fill them with:</p>
          <ul class="clean">
            <li>üíõ <strong>Wisdom</strong></li>
            <li>üíõ <strong>Experience</strong></li>
            <li>üíõ <strong>Strength</strong></li>
            <li>üíõ <strong>Patience</strong></li>
            <li>üíõ <strong>Self-love</strong></li>
          </ul>
        </article>

        <article class="section reveal">
          <h3 class="section-title">üîÆ 3. The Long-Life Philosophy ‚Äî A 50-Year Way of Living</h3>
          <p class="lead">Guiding principles inspired by Okinawa, Ikigai & Kintsugi:</p>

          <h4 style="margin:10px 0 6px;color:var(--accent)">üåÖ A. Move Slowly, Live Fully</h4>
          <ul class="clean"><li>Rush less</li><li>Feel more</li><li>Enjoy small moments</li><li>Be here now</li></ul>

          <h4 style="margin:10px 0 6px;color:var(--accent)">ü´ñ B. Rituals, Not Routines</h4>
          <p class="lead">Daily rituals that nourish: Morning stillness, warm tea, light exercise, gentle learning, evening gratitude.</p>

          <h4 style="margin:10px 0 6px;color:var(--accent)">üî• F. Follow the 1% Rule</h4>
          <p class="lead">Small daily improvements compound into a golden life.</p>
        </article>

        <article class="section reveal" id="gold">
          <h3 class="section-title">üåà 4. The Golden Principles for My Whole Life</h3>
          <ol class="clean" style="list-style:decimal;padding-left:20px;">
            <li class="lead"><span class="pill">üå§Ô∏è 1. Choose Joy Daily</span><div class="small">Happiness is a habit.</div></li>
            <li class="lead"><span class="pill">‚ôªÔ∏è 2. Keep Evolving</span><div class="small">Never stop learning.</div></li>
            <li class="lead"><span class="pill">üß° 3. Heal, Don‚Äôt Hide</span><div class="small">Face pain to transform it.</div></li>
            <li class="lead"><span class="pill">üï∞Ô∏è 5. Value Time More than Money</span><div class="small">Time builds meaning.</div></li>
          </ol>
        </article>

        <article class="section reveal">
          <h3 class="section-title">üïØÔ∏è 5. Final Blessing ‚Äî My Life, My Art</h3>
          <p class="lead"><strong>Ikigai gives me purpose.</strong><br><strong>Kintsugi gives me strength.</strong><br><strong>Presence gives me peace.</strong></p>
        </article>
      </section>

      <aside class="side">
        <div class="card" id="quick">
          <h3 style="margin:0 0 6px;color:var(--accent)">Quick Rituals</h3>
          <div class="small">Tiny, daily acts that connect to your Ikigai ‚Äî designed as rituals, not rules.</div>
          <ul class="clean" style="margin-top:12px">
            <li>Morning stillness ‚Äî 5 minutes of breath</li>
            <li>Warm tea ‚Äî taste it slowly</li>
            <li>15-minute learning ‚Äî read or watch something meaningful</li>
            <li>Move a little ‚Äî gentle stretching or walk</li>
            <li>Evening gratitude ‚Äî 3 small wins</li>
          </ul>
        </div>

        <div class="card">
          <h3 style="margin:0 0 6px;color:var(--accent)">Daily 1% Rule</h3>
          <div class="small">Pick one tiny habit and keep it protected.</div>
          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="ghost" id="smallHabit">Pick a Habit</button>
            <button class="ghost" id="viewWallpaper">Wallpaper Mode</button>
            <button class="ghost" id="downloadPNG_small">Download PNG</button>
          </div>
        </div>

        <div class="card small">
          <strong>Notes</strong>
          <p style="margin:8px 0 0">Page is optimized for printing and mobile. Use the printable button for a clean PDF. On mobile, tap the hamburger to view navigation.</p>
        </div>
      </aside>
    </main>

    <footer style="margin-top:18px;text-align:center;color:var(--muted);font-size:13px">
      Made with ‚ù§Ô∏è ‚Äî small golden steps create a golden life.
    </footer>
  </div>

  <!-- soft cherry tree silhouette -->
  <svg class="cherry-tree" width="420" height="420" viewBox="0 0 420 420" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <g opacity="0.95">
      <path d="M50 350 C90 250, 160 210, 210 220 C260 230, 320 260, 360 180" stroke="url(#t)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
      <defs><linearGradient id="t" x1="0" x2="1"><stop stop-color="#ffb6c1"/><stop offset="1" stop-color="#ff8aaf"/></linearGradient></defs>
    </g>
  </svg>

  <!-- modal -->
  <div class="modal" id="manifestoModal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-sheet" id="manifestoSheet">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px">
        <div style="font-weight:700;color:var(--accent)">Printable Manifesto</div>
        <div style="display:flex;gap:8px">
          <button class="ghost" id="closeModal">Close</button>
          <button class="ghost" id="printBtn">Print / Save as PDF</button>
        </div>
      </div>
      <div id="manifestoPrintable" style="color:#e8f2ff;font-family:Inter, system-ui;line-height:1.5;">
        <!-- content for printable preview (clean) -->
        <h1 style="font-family:'Playfair Display',serif;color:#fff;margin-bottom:6px">IKIGAI & KINTSUGI ‚Äî THE WAY I WANT TO LIVE MY LIFE</h1>
        <p style="color:var(--muted)">This printable view is optimized for PDF export. Use the Print button (or Cmd/Ctrl+P).</p>
        <hr style="border:0;border-top:2px solid rgba(255,209,102,0.08);margin:12px 0 18px">
        <p style="margin-top:8px">Ikigai: A life worth living. Kintsugi: Beauty through healing. Keep your manifesto simple and printable.</p>
      </div>
    </div>
  </div>

<script>
  // ---------- utilities ----------
  const clamp = (v, a, b) => Math.min(b, Math.max(a, v));

  // ---------- scroll progress ----------
  const progress = document.getElementById('scrollProgress');
  window.addEventListener('scroll', ()=>{
    const total = document.body.scrollHeight - window.innerHeight;
    const pct = total > 0 ? (window.scrollY/total)*100 : 0;
    progress.style.width = clamp(pct,0,100) + '%';
  }, {passive:true});

  // ---------- petals generation ----------
  (function makePetals(){
    const layer = document.querySelector('.petals');
    if(!layer) return;
    const count = 20;
    for(let i=0;i<count;i++){
      const p = document.createElement('div');
      p.className = 'petal';
      const size = 8 + Math.random()*26;
      p.style.width = size + 'px'; p.style.height = size + 'px';
      p.style.left = (Math.random()*100) + 'vw';
      p.style.top = (-20 - Math.random()*20) + 'vh';
      p.style.opacity = 0.6 + Math.random()*0.4;
      const anim = Math.random() > 0.5 ? 'float1' : 'float2';
      const delay = Math.random()*-12;
      const dur = 8 + Math.random()*16;
      p.style.animation = `${anim} ${dur}s linear ${delay}s infinite`;
      p.style.transform = `rotate(${Math.random()*360}deg)`;
      layer.appendChild(p);
    }
  })();

  // ---------- reveal on scroll ----------
  const reveals = Array.from(document.querySelectorAll('.reveal'));
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); });
  }, {threshold:0.12});
  reveals.forEach(r => observer.observe(r));

  // ---------- modal & print handling ----------
  const modal = document.getElementById('manifestoModal');
  const openBtns = [document.getElementById('openManifestoBtn'), document.getElementById('openManifestoTop'), document.getElementById('openManifesto')];
  // attach safe listeners (filter nulls)
  openBtns.forEach(b=>{ if(b) b.addEventListener('click', ()=> openPrintableModal(false)); });

  document.getElementById('openManifestoTop').addEventListener('click', ()=> openPrintableModal(false));
  document.getElementById('closeModal').addEventListener('click', closePrintableModal);

  function openPrintableModal(doPrintImmediately){
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
    // if immediate print requested, wait for modal to be visible then print
    if(doPrintImmediately){
      // wait for the CSS transition to complete visually (safe)
      setTimeout(()=> {
        // open print dialog
        window.print();
        // keep modal open so user can see result; close automatically after small delay
        setTimeout(closePrintableModal, 400);
      }, 300);
    }
  }
  function closePrintableModal(){
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden','true');
  }

  // Print button at top should open modal and trigger print automatically
  document.getElementById('downloadPrint').addEventListener('click', ()=>{
    // open modal and then print (ensures print styles are applied & user sees preview)
    openPrintableModal(true);
  });

  // Modal print button just prints current printable content
  document.getElementById('printBtn').addEventListener('click', ()=> window.print());

  // Close modal with Escape or outside click
  modal.addEventListener('click', (e)=> { if(e.target === modal) closePrintableModal(); });
  document.addEventListener('keydown', (e)=> { if(e.key === 'Escape') closePrintableModal(); });

  // ---------- habit picker ----------
  document.getElementById('smallHabit').addEventListener('click', ()=>{
    const habits = [
      '5 minutes morning stillness',
      'Drink tea slowly and mindfully',
      '15 mins learning (read/watch)',
      '10 squats or gentle stretch',
      'Write 3 things you‚Äôre grateful for',
      'Watch one inspiring short video',
      'Smile and greet someone'
    ];
    const pick = habits[Math.floor(Math.random()*habits.length)];
    // better small toast instead of alert for mobile comfort
    toast('Tiny habit suggestion ‚ûú ' + pick);
  });

  // ---------- wallpaper / PNG ----------
  document.getElementById('viewWallpaper').addEventListener('click', () => {
    document.documentElement.requestFullscreen?.();
    document.body.style.transition = 'filter .35s ease';
    document.body.style.filter = 'brightness(1.02) saturate(1.06)';
    toast('Wallpaper mode: press F11 (or Esc) to exit fullscreen.');
  });

  function elementToPNG(el, name='HappyLife_Ikigai_Kintsugi.png'){
    // quick SVG foreignObject trick ‚Äî works in many modern browsers
    try{
      const content = el.innerHTML;
      const width = Math.min(1400, el.clientWidth*2 || 1200);
      const height = Math.min(2200, el.clientHeight*2 || 1600);
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${width}' height='${height}'>
        <foreignObject width='100%' height='100%'>
          <div xmlns='http://www.w3.org/1999/xhtml' style='font-family:Inter,system-ui; font-size:18px; color:#e8f2ff; background:linear-gradient(180deg,#07101a,#0b1620); padding:30px; box-sizing:border-box;'>
            ${content}
          </div>
        </foreignObject>
      </svg>`;
      const blob = new Blob([svg], {type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const img = new Image();
      img.onload = () => {
        const c = document.createElement('canvas'); c.width = width; c.height = height;
        const ctx = c.getContext('2d');
        ctx.fillStyle = '#07101a'; ctx.fillRect(0,0,width,height);
        ctx.drawImage(img,0,0);
        URL.revokeObjectURL(url);
        c.toBlob(b => {
          const a = document.createElement('a');
          a.href = URL.createObjectURL(b); a.download = name; document.body.appendChild(a); a.click();
          setTimeout(()=>{ URL.revokeObjectURL(a.href); a.remove(); }, 250);
        }, 'image/png');
      };
      img.onerror = () => { toast('PNG export is not supported in this browser ‚Äî use Print to save as PDF.'); };
      img.src = url;
    }catch(err){
      console.error(err);
      toast('Could not export PNG ‚Äî try Print instead.');
    }
  }

  document.getElementById('downloadPNG_small').addEventListener('click', ()=>{
    const printable = document.getElementById('manifestoContent');
    if(printable) elementToPNG(printable, 'HappyLife_Manifesto.png');
  });

  // ---------- toast (small in-page notification) ----------
  function toast(msg, ms=2400){
    let t = document.getElementById('hf_toast');
    if(t) { t.remove(); clearTimeout(t._timeout); }
    t = document.createElement('div');
    t.id='hf_toast';
    t.style.position='fixed';
    t.style.left='50%';
    t.style.transform='translateX(-50%)';
    t.style.bottom='26px';
    t.style.background='linear-gradient(90deg, rgba(0,0,0,0.6), rgba(0,0,0,0.4))';
    t.style.color='#fff';
    t.style.padding='10px 14px';
    t.style.borderRadius='999px';
    t.style.boxShadow='0 8px 30px rgba(0,0,0,0.6)';
    t.style.zIndex='1700';
    t.style.fontWeight='600';
    t.innerText = msg;
    document.body.appendChild(t);
    t._timeout = setTimeout(()=>{ t.style.transition='opacity .25s ease'; t.style.opacity='0'; setTimeout(()=>t.remove(),260); }, ms);
  }

  // ---------- responsive hamburger ----------
  const hamburger = document.getElementById('hamburgerBtn');
  const navLinks = document.getElementById('navLinks');
  hamburger.addEventListener('click', ()=>{
    const expanded = hamburger.getAttribute('aria-expanded') === 'true';
    hamburger.setAttribute('aria-expanded', String(!expanded));
    if(navLinks.style.display === 'flex') { navLinks.style.display = 'none'; }
    else { navLinks.style.display = 'flex'; navLinks.style.flexDirection = 'column'; navLinks.style.position='absolute'; navLinks.style.right='14px'; navLinks.style.top='64px'; navLinks.style.background='linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))'; navLinks.style.padding='12px'; navLinks.style.borderRadius='12px'; navLinks.style.boxShadow='0 12px 40px rgba(2,6,23,0.6)'; }
  });

  // keep nav shown on resize if larger
  window.addEventListener('resize', ()=>{
    if(window.innerWidth > 980){ navLinks.style.display = 'flex'; navLinks.style.flexDirection='row'; navLinks.style.position='static'; navLinks.style.top='auto'; navLinks.style.right='auto'; navLinks.style.background='transparent'; navLinks.style.padding='0'; navLinks.style.boxShadow='none'; }
    else { /* keep collapsed state */ }
  });

  // ---------- accessible focus rings on keyboard nav ----------
  (function keyboardNav(){
    let usingKeyboard = false;
    window.addEventListener('keydown', e => { if(e.key === 'Tab') { usingKeyboard = true; document.body.classList.add('kb'); }});
    window.addEventListener('mousedown', ()=>{ usingKeyboard = false; document.body.classList.remove('kb'); });
  })();

  // ready: small animated header flourish on load
  window.addEventListener('load', ()=> {
    // gentle push on title
    const t = document.querySelector('.title');
    if(t) { t.animate([{transform:'translateY(6px)'},{transform:'translateY(0)'}], {duration:600, easing:'cubic-bezier(.2,.9,.3,1)'}); }
  });
</script>
</body>
</html>
